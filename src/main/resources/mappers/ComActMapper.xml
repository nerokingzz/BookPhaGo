<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com_act">
 	
 	<!-- 커뮤니티 목록 select -->
 	<select id="com_act_list" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_INFO WHERE community_establish_status='수락'
 	</select>
 	
 	 <!-- 커뮤니티 하나의 정보  select -->
 	<select id="com_info" parameterType="integer" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_INFO WHERE community_id=#{community_id}
 	</select>
 	
	<!-- 게시판정보 insert -->
	<insert id="com_add_board" parameterType="boardInfoVo">
		<!-- 시퀀스 사용 -->
		<selectKey keyProperty="board_id" resultType="integer" order="BEFORE">
			SELECT seq_auto_increment.NEXTVAL FROM DUAL
		</selectKey>
		
    	INSERT INTO M_COMMUNITY_BOARD (board_id, community_id, board_name, board_article_count, board_category)
    	VALUES (#{board_id}, #{community_id}, #{board_name}, #{board_article_count}, #{board_category})
 	</insert>
 	
 	<!-- 게시판 리스트 select -->
 	<select id="com_board_list" parameterType="integer" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_BOARD WHERE community_id=#{community_id}
 	</select>
 	
 	<!--  게시글 select -->
 	<select id="com_article_list" parameterType="integer" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_ARTICLE WHERE board_id=#{board_id}
 	</select>
 	
 	<!-- 멤버 가입 insert -->
 	<insert id="com_mem" parameterType="comMemberVo">
 		INSERT INTO M_COMMUNITY_MEMBER (member_nickname, member_id, community_id, member_join_date, member_position, member_answer1, member_answer2, member_visit_count, member_article_count, member_reply_count, member_join_status)
 		VALUES (#{member_nickname}, #{member_id}, #{community_id}, #{member_join_date}, #{member_position}, #{member_answer1}, #{member_answer2}, #{member_visit_count}, #{member_article_count}, #{member_reply_count}, #{member_join_status})
 	</insert>
 	
 	<!-- 멤버 닉네임 중복체크 -->
 	<select id="com_mem_nick_chk" parameterType="hashmap" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_MEMBER WHERE community_id=#{community_id} and member_nickname=#{member_nickname}
 	</select>
 	
 	<!-- 특정멤버 select -->
 	<select id="com_mem_chk" parameterType="hashmap" resultType="hashmap">
 		SELECT * FROM M_COMMUNITY_MEMBER WHERE community_id=#{community_id} and member_id=#{user_id}
 	</select>
 	
 	
 	
</mapper>